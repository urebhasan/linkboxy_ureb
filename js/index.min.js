$(function() {
    $('#forgotPassword').on('click', function(e) {
        $('.log-form').hide();
        $('.forgot-form').show()
    });
    $('.signIn').on('click', function(e) {
        $('.signup-form').hide();
        $('.forgot-form').hide();
        $('.log-form').show()
    });
    $('#signUp').on('click', function(e) {
        $('.log-form').hide();
        $('.signup-form').show()
    });
    $('#login_form').on('submit', function(e) {
        e.preventDefault();
        login = $('#login').val();
        password = $('#password').val();
        token = $('#token').val();
        var request = $.ajax({
            url: "ajax/signIn.php",
            type: "POST",
            data: 'login=' + login + '&password=' + password + '&token=' + token,
            dataType: "json",
            error: function() {
                alert('Error')
            },
            beforeSend: function() {},
            success: function(data) {
                if (data.success === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'info'
                    });
                    setTimeout(function() {
                        window.location.href = "main.php?i"
                    }, 500)
                } else if (data.error === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'danger'
                    })
                }
            },
            complete: function() {}
        })
    });
    $('#forgot_form').on('submit', function(e) {
        e.preventDefault();
        email = $('#forgot_login').val();
        var request = $.ajax({
            url: "ajax/forgot.php",
            type: "POST",
            data: 'email=' + email,
            dataType: "json",
            error: function() {
                alert('Error')
            },
            beforeSend: function() {},
            success: function(data) {
                if (data.success === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'success'
                    })
                } else if (data.error === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'danger'
                    })
                }
            },
            complete: function() {}
        })
    });
    $('#signup_form').on('submit', function(e) {
        e.preventDefault();
        name = $('#name_signup').val();
        login = $('#login_signup').val();
        password = $('#password_signup').val();
        package = $('#package').val();
        var request = $.ajax({
            url: "ajax/signUp.php",
            type: "POST",
            data: 'name=' + name + '&login=' + login + '&password=' + password + '&package=' + package,
            dataType: "json",
            error: function() {
                alert('Error')
            },
            beforeSend: function() {},
            success: function(data) {
				//data = JSON.parse(data);
				console.log(data);
				if (data.success === !0 && data.link != '') {
						window.location.href = 'package.php?package='+data.custom;
					   /*  const paypalForm = document.getElementById("paypal_checkout");
						paypalForm.querySelector('input[name=a3]').value = data.a3;
						paypalForm.querySelector('input[name=t3]').value = data.t3;
						paypalForm.querySelector('input[name=item_name]').value = data.item_name;
						paypalForm.querySelector('input[name=custom]').value = data.custom;
						document.getElementById("paypal_checkout").submit(); */
				}else if (data.success === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'success'
                    })
                } else if (data.error === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'danger'
                    })
                }
          /*       if (data.success === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'success'
                    })
                } else if (data.error === !0) {
                    $.notify({
                        message: data.text
                    }, {
                        placement: {
                            from: 'bottom',
                            align: 'center'
                        },
                        type: 'danger'
                    })
                } */
            },
            complete: function() {}
        })
    })
})